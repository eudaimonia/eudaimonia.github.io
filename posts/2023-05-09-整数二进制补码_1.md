---
layout: post
title: "整数二进制补码_1"
date: 2023-05-09T14:36:02+08:00
categories:
---

# 0
在现在的计算机中通常是用补码表示负数，加法操作也用补码加法完成。  
长度为n>2的补码(two's complement)，表示的值的范围是$[-2^{n-1}, 2^{n-1}-1]$。  
其表示则是最高位留作符号位，0表示非负数，1表示负数。非负数的补码直接就是其二进制编码本身，然后符号位为0。负数的补码表示则是，按照前面的方式先得到其相反数(非负数)的补码，然后将该补码按位取反(包括符号位),然后再按照普通二进制的加法加上1的补码。  
比如，假设长度n=3, 则3的补码表011;而-3的补码表示，则是先将3的补码按位取反~(011)=100, 在加上1补码001, 即 100 + 001=101  

# 1
在体系结构的书籍中往往也会介绍一下反码(one's complement)作为对补码的补充说明。
长度为n>2的反码，表示的值的范围是$[-2^{n-1} + 1,2^{n-1} -1]$,0值有正0表示和负0表示。  
其表示是，最高位留作符号位，0表示非负数，1表示负数。非负数的反码直接就是其二进制编码本身，然后符号位为0。负数的反码则是，按照前面的方式，得到其相反数的反码，再将该反码按位取反(包括符号位)。
站在二进制编码的角度看，就是比补码少了加上1的二进制编码操作，其余操作步骤完全相同。

# 2
在之前的废稿["整数二进制补码"](/posts/2023-05-06-%E6%95%B4%E6%95%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81.md)中，有尝试证明过，长度为n的二进制普通加法运算同构于循环群$\Z_{2^n}$，但未成功。现在让我们假设，待证明结论是正确的。  
将长度为n的所有二进制编码集合记作$\Theta(n), n > 0$, 定义在上面的普通加法运算记作+。  
$\forall x \exists y \in \Theta(n), x+y=0$, 即可将z - x 定义为 z + y。x和y互为补码
群是一种具有很好运算性质的代数结构，若二进制的负数编码及加法运算能够与群$<\Theta(n), +>$保持结构兼容，则其良好的运算性质也能得到保留。  

# 3
下表是n=3时对应的全部二进制编码,无符号数值，补码值，反码值，以及sign–magnitude的值

<table>
<thead>
<tr>
<th>二进制编码</th>
<th>无符号数值</th>
<th>补码值</th>
<th>反码值</th>
<th>sign–magnitude</th>
</tr>
</thead>
<tbody>
<tr>
<td>000</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>001</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>010</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>011</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>100</td>
<td>4</td>
<td>-4</td>
<td>-3</td>
<td>0</td>
</tr>
<tr>
<td>101</td>
<td>5</td>
<td>-3</td>
<td>-2</td>
<td>-1</td>
</tr>
<tr>
<td>110</td>
<td>6</td>
<td>-2</td>
<td>-1</td>
<td>-2</td>
</tr>
<tr>
<td>111</td>
<td>7</td>
<td>-1</td>
<td>0</td>
<td>-3</td>
</tr>
</tbody>
</table>

二进制编码到补码值的映射为 $f \to (-1) \times c_{n-1}2^{n-1} + \sum_{i=0}^{n-2}c_i2^i, c_i \in \{0, 1\}$  
二进制编码到无符号整数的映射为: $g \to \sum_{i=0}^{n-1}c_i2^i, c_i \in \{0, 1\}$  
可以看出二进制编码到补码和无符号整数的映射均为一一映射，
而二进制编码到反码和sign-magnitude的映射则不为一一映射，肯定不是同构映射了, 有两个不同的元素映射到整数0上了。  
容易看出，$<\Theta(n), +>$同构于$\Z_{2^n}$  
并且容易看出，不证自明(**才怪！我试了没证出来**),$<\Theta(n), +>$同构于$\Z_{2^n} + k, k \in Z$, 当 $k=-2^{n-1}$时，补码的编码映射就是同构映射（*这我没有证明出来，甚至没有能证明$\Z_{2^n} + k$有群结构*)  
总结一下，关键步骤我都无法严格证明，只有一些在草稿纸上的演算验证，所以以下观察结论只能留给数学能力较强的人来证明了：  
$<\Theta(n), +>$同构于$\Z_{2^n} + k, k \in Z$, 当$k=0$时，同构映射为$\Theta(n)$到无符号数值的编码映射，当$k=-2^{n-1}$时，同构映射为$<\Theta(n)>$到补码值的映射。
